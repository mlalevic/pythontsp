<!doctype html><html><head><link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" /><script src="http://code.jquery.com/jquery-1.10.1.min.js"></script><script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script><script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script><script type="text/javascript">var map = null; $$(function() {    $$( "input[type=submit]" )    .button()    .click(function( event ) {        event.preventDefault();        //jquery ajax call        $$.get("/coordinates", $$("form").serialize(),            function(data){                $$("div#result").empty();                var locations = [];                $$.each(data, function(i, item){                    if(item[0] == "error"){                        $$("div#result").append('<p><em>'+ item[1] +'</em></p>');                    }else{                        $$("div#result").append($$('<p></p>').text(item[1] + ': ' + item[2][0] + ', ' + item[2][1]));                        locations.push([item[2][0], item[2][1]]);                    }                });                updateMap(locations);        }, "json");    });});function updateMap(locations){    if(map == null){        map = new Microsoft.Maps.Map(document.getElementById('myMap'), {credentials: 'your-key-here', mapTypeId: Microsoft.Maps.MapTypeId.road, zoom: 8});    }    map.entities.clear();    for(var i = 0; i < locations.length; i++){       var pushpin = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(locations[i][0], locations[i][1]), null);       map.entities.push(pushpin);	   if(i == 0){	       map.setView({ zoom: 8, center: new Microsoft.Maps.Location(locations[i][0], locations[i][1]) })	   }    }		//and remove credentials message until Microsoft sorts out this key-in-plain-text stupidity - don't do this at home	$$('div.OverlaysBL').next().hide(); //just a little hack}</script></head><body>	<p>Please enter address per line to get their coordinates</p>	<form method="get">	<textarea id="addresses" name="addresses"></textarea>	<input type="submit" value="submit" />	</form>	<div id="result">	</div>	<div id='myMap' style="position:relative; width:900px; height:600px;"></div></body>